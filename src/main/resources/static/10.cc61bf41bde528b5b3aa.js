(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"0NIx":function(r,i,t){"use strict";t.r(i),t.d(i,"UsuarioModule",function(){return sr});var a=t("ofXK"),e=t("tyNb"),o=t("eJOa"),s=t("0IaG"),c=t("fXoL"),n=t("4lOG"),u=t("WFk5"),b=t("5eHb"),l=t("3Pt+"),d=t("Obj7"),m=t("Kj3r"),h=t("kmnG"),g=t("qFsG"),p=t("bTqV"),f=t("NFeN");function v(r,i){if(1&r&&(c.Vb(0,"div"),c.Vb(1,"mat-error"),c.Vb(2,"p"),c.Jc(3),c.Ub(),c.Ub(),c.Ub()),2&r){const r=i.$implicit;c.Cb(3),c.Kc(r)}}function U(r,i){if(1&r&&(c.Vb(0,"div"),c.Hc(1,v,4,1,"div",9),c.Ub()),2&r){const r=c.hc(2);c.Cb(1),c.oc("ngForOf",r.mensajesErrorNombre)}}function V(r,i){if(1&r&&(c.Vb(0,"div"),c.Vb(1,"mat-error"),c.Vb(2,"p"),c.Jc(3),c.Ub(),c.Ub(),c.Ub()),2&r){const r=i.$implicit;c.Cb(3),c.Kc(r)}}function C(r,i){if(1&r&&(c.Vb(0,"div"),c.Hc(1,V,4,1,"div",9),c.Ub()),2&r){const r=c.hc(2);c.Cb(1),c.oc("ngForOf",r.mensajesErrorCedula)}}function _(r,i){if(1&r&&(c.Vb(0,"div"),c.Vb(1,"mat-error"),c.Vb(2,"p"),c.Jc(3),c.Ub(),c.Ub(),c.Ub()),2&r){const r=i.$implicit;c.Cb(3),c.Kc(r)}}function j(r,i){if(1&r&&(c.Vb(0,"div"),c.Hc(1,_,4,1,"div",9),c.Ub()),2&r){const r=c.hc(2);c.Cb(1),c.oc("ngForOf",r.mensajesErrorUsuario)}}function w(r,i){if(1&r&&(c.Vb(0,"div"),c.Vb(1,"mat-error"),c.Vb(2,"p"),c.Jc(3),c.Ub(),c.Ub(),c.Ub()),2&r){const r=i.$implicit;c.Cb(3),c.Kc(r)}}function k(r,i){if(1&r&&(c.Vb(0,"div"),c.Hc(1,w,4,1,"div",9),c.Ub()),2&r){const r=c.hc(3);c.Cb(1),c.oc("ngForOf",r.mensajesErrorPassword)}}const E=function(r,i){return{"is-valid":r,"is-invalid":i}};function I(r,i){if(1&r){const r=c.Wb();c.Vb(0,"div",3),c.Vb(1,"div",4),c.Vb(2,"mat-form-field"),c.Vb(3,"mat-label"),c.Jc(4,"Password"),c.Ub(),c.Qb(5,"input",10),c.Vb(6,"mat-hint"),c.Jc(7,"Ingrese un password"),c.Ub(),c.Vb(8,"button",11),c.dc("click",function(){c.zc(r);const i=c.hc(2);return i.hide=!i.hide}),c.Vb(9,"mat-icon"),c.Jc(10),c.Ub(),c.Ub(),c.Hc(11,k,2,1,"div",0),c.Ub(),c.Ub(),c.Ub()}if(2&r){const r=c.hc(2);let i=null;c.Cb(5),c.oc("ngClass",c.rc(6,E,0===r.mensajesErrorPassword.length&&(null==r.formularioUsuario||null==(i=r.formularioUsuario.get("password"))?null:i.value),r.mensajesErrorPassword.length>0))("type",r.hide?"password":"text"),c.Cb(3),c.Db("aria-label","Hide password")("aria-pressed",r.hide),c.Cb(2),c.Kc(r.hide?"visibility_off":"visibility"),c.Cb(1),c.oc("ngIf",r.mensajesErrorPassword.length>0)}}function J(r,i){if(1&r&&(c.Vb(0,"div"),c.Vb(1,"form",1),c.Vb(2,"div",2),c.Vb(3,"div",3),c.Vb(4,"div",4),c.Vb(5,"mat-form-field"),c.Vb(6,"mat-label"),c.Jc(7,"Nombre"),c.Ub(),c.Qb(8,"input",5),c.Vb(9,"mat-hint"),c.Jc(10,"Ingrese un nombre"),c.Ub(),c.Hc(11,U,2,1,"div",0),c.Ub(),c.Ub(),c.Ub(),c.Vb(12,"div",3),c.Vb(13,"div",4),c.Vb(14,"mat-form-field"),c.Vb(15,"mat-label"),c.Jc(16,"C\xe9dula"),c.Ub(),c.Qb(17,"input",6),c.Vb(18,"mat-hint"),c.Jc(19,"Ingrese una c\xe9dula"),c.Ub(),c.Hc(20,C,2,1,"div",0),c.Ub(),c.Ub(),c.Ub(),c.Vb(21,"div",3),c.Vb(22,"div",4),c.Vb(23,"mat-form-field"),c.Vb(24,"mat-label"),c.Jc(25,"Usuario"),c.Ub(),c.Qb(26,"input",7),c.Vb(27,"mat-hint"),c.Jc(28,"Ingrese un usuario"),c.Ub(),c.Hc(29,j,2,1,"div",0),c.Ub(),c.Ub(),c.Ub(),c.Hc(30,I,12,9,"div",8),c.Ub(),c.mc(31),c.Ub(),c.Ub()),2&r){const r=c.hc();let i=null,t=null,a=null;c.Cb(1),c.oc("formGroup",r.formularioUsuario),c.Cb(7),c.oc("ngClass",c.rc(8,E,0===r.mensajesErrorNombre.length&&(null==r.formularioUsuario||null==(i=r.formularioUsuario.get("nombre"))?null:i.value),r.mensajesErrorNombre.length>0)),c.Cb(3),c.oc("ngIf",r.mensajesErrorNombre.length>0),c.Cb(6),c.oc("ngClass",c.rc(11,E,0===r.mensajesErrorCedula.length&&(null==r.formularioUsuario||null==(t=r.formularioUsuario.get("cedula"))?null:t.value),r.mensajesErrorCedula.length>0)),c.Cb(3),c.oc("ngIf",r.mensajesErrorCedula.length>0),c.Cb(6),c.oc("ngClass",c.rc(14,E,0===r.mensajesErrorUsuario.length&&(null==r.formularioUsuario||null==(a=r.formularioUsuario.get("usuario"))?null:a.value),r.mensajesErrorUsuario.length>0)),c.Cb(3),c.oc("ngIf",r.mensajesErrorUsuario.length>0),c.Cb(1),c.oc("ngIf",!r.ocultarPass)}}const P=["*"];let y=(()=>{class r{constructor(r,i){this._formBuilder=r,this._toasterService=i,this.hide=!0,this.formularioValido=!1,this.mensajesErrorNombre=[],this.mensajesErrorCedula=[],this.mensajesErrorUsuario=[],this.mensajesErrorPassword=[],this._mensajesValidacionNombre=d.e,this._mensajesValidacionCedula=d.a,this._mensajesValidacionUsuario=d.h,this._mensajesValidacionPassword=d.f,this.subscriptores=[],this.ocultarPass=!1,this.formularioEmitter=new c.o}ngOnInit(){this.iniciarFormulario(),this._escucharFormulario(),this._escucharCampoNombre(),this._escucharCampoCedula(),this._escucharCampoUsuario(),this._escucharCampoPassword()}ngOnDestroy(){this.subscriptores.forEach(r=>r.unsubscribe())}iniciarFormulario(){var r;this.formularioUsuario=this._formBuilder.group({nombre:[this.usuario?this.usuario.nombre:"",[l.r.required,l.r.minLength(3),l.r.maxLength(80),l.r.pattern(/[A-Za-z]+/g)]],cedula:[this.usuario?this.usuario.cedula:"",[l.r.required,l.r.minLength(10),l.r.maxLength(10),l.r.pattern(/^-?(0|[1-9]\d*)?$/)]],usuario:[this.usuario?this.usuario.usuario:"",[l.r.required,l.r.minLength(3),l.r.maxLength(100)]],password:[this.usuario?this.usuario.password:"",[]]}),this.usuario?this.ocultarPass=!0:null===(r=this.formularioUsuario.get("password"))||void 0===r||r.setValidators([l.r.required,l.r.minLength(8)])}_escucharFormulario(){if(this.formularioUsuario){const r=this.formularioUsuario.valueChanges.subscribe(r=>{var i;(null===(i=this.formularioUsuario)||void 0===i?void 0:i.valid)?this.formularioEmitter.emit(r):this.formularioEmitter.emit(void 0)});this.subscriptores.push(r)}}_escucharCampoNombre(){var r;const i=null===(r=this.formularioUsuario)||void 0===r?void 0:r.get("nombre"),t=i.valueChanges.pipe(Object(m.a)(1e3)).subscribe(r=>{this._setearMensajesNombre(i)});this.subscriptores.push(t)}_setearMensajesNombre(r){this.mensajesErrorNombre=[],(r.dirty||r.touched)&&r.errors&&(this.mensajesErrorNombre=Object.keys(r.errors).map(r=>this._mensajesValidacionNombre[r]))}_escucharCampoCedula(){var r;const i=null===(r=this.formularioUsuario)||void 0===r?void 0:r.get("cedula"),t=i.valueChanges.pipe(Object(m.a)(1e3)).subscribe(r=>{!function(r){if(10===r.length){const i=r.substring(0,2);if(i>=String(0)&&i<=String(24)){const i=Number(r.substring(9,10)),t=Number(r.substring(1,2))+Number(r.substring(3,4))+Number(r.substring(5,6))+Number(r.substring(7,8));let a=r.substring(0,1);a*=2,a>9&&(a-=9);let e=r.substring(2,3);e*=2,e>9&&(e-=9);let o=r.substring(4,5);o*=2,o>9&&(o-=9);let s=r.substring(6,7);s*=2,s>9&&(s-=9);let c=r.substring(8,9);c*=2,c>9&&(c-=9);const n=t+(a+e+o+s+c),u=String(n).substring(0,1);let b=10*(Number(u)+1)-n;return 10===b&&(b=0),b===i}return!1}return!1}(r)?(i.reset(),this._toasterService.error("La c\xe9dula no es v\xe1lida","Error")):(this._setearMensajesCedula(i),this._toasterService.success("C\xe9dula v\xe1lida"))});this.subscriptores.push(t)}_setearMensajesCedula(r){this.mensajesErrorCedula=[],(r.dirty||r.touched)&&r.errors&&(this.mensajesErrorCedula=Object.keys(r.errors).map(r=>this._mensajesValidacionCedula[r]))}_escucharCampoUsuario(){var r;const i=null===(r=this.formularioUsuario)||void 0===r?void 0:r.get("usuario"),t=i.valueChanges.pipe(Object(m.a)(1e3)).subscribe(r=>{this._setearMensajesUsuario(i)});this.subscriptores.push(t)}_setearMensajesUsuario(r){this.mensajesErrorUsuario=[],(r.dirty||r.touched)&&r.errors&&(this.mensajesErrorUsuario=Object.keys(r.errors).map(r=>this._mensajesValidacionUsuario[r]))}_escucharCampoPassword(){var r;const i=null===(r=this.formularioUsuario)||void 0===r?void 0:r.get("password"),t=i.valueChanges.pipe(Object(m.a)(1e3)).subscribe(r=>{this._setearMensajesPassword(i)});this.subscriptores.push(t)}_setearMensajesPassword(r){this.mensajesErrorPassword=[],(r.dirty||r.touched)&&r.errors&&(this.mensajesErrorPassword=Object.keys(r.errors).map(r=>this._mensajesValidacionPassword[r]))}}return r.\u0275fac=function(i){return new(i||r)(c.Pb(l.c),c.Pb(b.b))},r.\u0275cmp=c.Jb({type:r,selectors:[["app-formulario-usuario"]],inputs:{usuario:"usuario"},outputs:{formularioEmitter:"formularioEmitter"},ngContentSelectors:P,decls:1,vars:1,consts:[[4,"ngIf"],[1,"example-form",3,"formGroup"],[1,"row"],[1,"col-sm-6","text-center","marginbottom1rem"],[1,"form-group"],["matInput","","placeholder","Luis Lopez","formControlName","nombre","type","text","aria-describedby","emailHelp",1,"form-control","example-full-width",3,"ngClass"],["matInput","","placeholder","17171717177","formControlName","cedula","type","text","aria-describedby","emailHelp",1,"form-control","example-full-width",3,"ngClass"],["matInput","","placeholder","user001","formControlName","usuario","type","text","aria-describedby","emailHelp",1,"form-control","example-full-width",3,"ngClass"],["class","col-sm-6 text-center marginbottom1rem",4,"ngIf"],[4,"ngFor","ngForOf"],["matInput","","placeholder","B-01","formControlName","password","aria-describedby","emailHelp",1,"form-control","example-full-width",3,"ngClass","type"],["mat-icon-button","","matSuffix","",3,"click"]],template:function(r,i){1&r&&(c.nc(),c.Hc(0,J,32,17,"div",0)),2&r&&c.oc("ngIf",i.formularioUsuario)},directives:[a.l,l.s,l.m,l.g,h.c,h.g,g.a,l.b,l.l,l.f,a.j,h.f,a.k,h.b,p.a,h.h,f.a],styles:[""]}),r})(),S=(()=>{class r{constructor(r,i,t,a,e){this.data=r,this._usuarioRestService=i,this._cargandoService=t,this._toastrService=a,this._dialog=e}ngOnInit(){}guardarRegistro(){var r;this._cargandoService.habilitarCargando(),this.data.usuario?(this.usuarioACrear.id=this.data.usuario.id,null===(r=this.usuarioACrear)||void 0===r||(r.habilitado=this.data.usuario.habilitado),this._usuarioRestService.editar(this.usuarioACrear,this.data.usuario.id).subscribe(r=>{this._cargandoService.deshabilitarCargando(),this._toastrService.success("Se actualiz\xf3 correctamente"),this._dialog.closeAll()},r=>{console.error({error:r}),this._cargandoService.deshabilitarCargando(),this._toastrService.error("Ocurri\xf3 un error","Error")})):this.usuarioACrear&&(this.usuarioACrear.habilitado=!0,this._usuarioRestService.crear(this.usuarioACrear).subscribe(r=>{this._cargandoService.deshabilitarCargando(),this._toastrService.success("Se cre\xf3 correctamente"),this._dialog.closeAll()},r=>{console.error({error:r}),this._cargandoService.deshabilitarCargando(),this._toastrService.error("Ocurri\xf3 un error","Error")}))}setearUsuario(r){this.usuarioACrear=r}}return r.\u0275fac=function(i){return new(i||r)(c.Pb(s.a),c.Pb(n.a),c.Pb(u.a),c.Pb(b.b),c.Pb(s.b))},r.\u0275cmp=c.Jb({type:r,selectors:[["app-modal-crear-editar-usuario"]],decls:9,vars:4,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"usuario","formularioEmitter"],["mat-dialog-actions",""],["mat-button","","mat-raised-button","","color","primary",3,"disabled","click"],["mat-button","","mat-dialog-close","","mat-raised-button","","color","accent"]],template:function(r,i){1&r&&(c.Vb(0,"h1",0),c.Jc(1),c.Ub(),c.Vb(2,"div",1),c.Vb(3,"app-formulario-usuario",2),c.dc("formularioEmitter",function(r){return i.setearUsuario(r)}),c.Ub(),c.Ub(),c.Vb(4,"div",3),c.Vb(5,"button",4),c.dc("click",function(){return i.guardarRegistro()}),c.Jc(6),c.Ub(),c.Vb(7,"button",5),c.Jc(8,"Cancelar"),c.Ub(),c.Ub()),2&r&&(c.Cb(1),c.Lc("",i.data.usuario?"Editar":"Crear"," Usuario"),c.Cb(2),c.oc("usuario",i.data.usuario),c.Cb(2),c.oc("disabled",!i.usuarioACrear),c.Cb(1),c.Kc(i.data.usuario?"Guardar cambios":"Guardar"))},directives:[s.h,s.e,y,s.c,p.a,s.d],styles:[""]}),r})();var x=t("c9Pa"),N=t("WekK"),z=t("Wp6s"),O=t("nRUH"),H=t("5EWq"),M=t("7zfz"),G=t("rEr+"),B=t("jIHw"),R=t("Q4Mo"),A=t("1jcm"),L=t("qNuk");function F(r,i){}function q(r,i){if(1&r){const r=c.Wb();c.Vb(0,"button",24),c.dc("click",function(){return c.zc(r),c.hc(2).abrirModalCrearEditar()}),c.Ub()}}function D(r,i){1&r&&c.Qb(0,"col"),2&r&&c.Eb("col-width col-width-"+i.$implicit.width)}function $(r,i){if(1&r&&(c.Vb(0,"colgroup"),c.Hc(1,D,1,2,"col",25),c.Ub()),2&r){const r=i.$implicit;c.Cb(1),c.oc("ngForOf",r)}}function T(r,i){if(1&r&&(c.Vb(0,"th"),c.Vb(1,"div",27),c.Vb(2,"div",28),c.Jc(3),c.Ub(),c.Ub(),c.Ub()),2&r){const r=i.$implicit;c.Cb(3),c.Lc(" ",r.header," ")}}function K(r,i){if(1&r&&(c.Vb(0,"tr"),c.Hc(1,T,4,1,"th",26),c.Ub()),2&r){const r=i.$implicit;c.Cb(1),c.oc("ngForOf",r)}}const Q=function(r,i){return{"fondo-cumple":r,"fondo-no-cumple":i}};function W(r,i){if(1&r){const r=c.Wb();c.Vb(0,"div"),c.Vb(1,"mat-card"),c.Vb(2,"div",30),c.Vb(3,"div",31),c.Vb(4,"p",32),c.Jc(5),c.Ub(),c.Ub(),c.Vb(6,"div",33),c.Vb(7,"mat-slide-toggle",34),c.dc("change",function(){c.zc(r);const i=c.hc(2).$implicit;return c.hc(2).activarDesactivarRegistro(i)}),c.Jc(8),c.ic(9,"activoInactivo"),c.Ub(),c.Ub(),c.Ub(),c.Vb(10,"mat-card-content",35),c.Vb(11,"div",0),c.Vb(12,"div",36),c.Vb(13,"strong"),c.Jc(14,"Informaci\xf3n usuario"),c.Ub(),c.Ub(),c.Vb(15,"div",1),c.Vb(16,"div",0),c.Vb(17,"div",37),c.Vb(18,"strong"),c.Jc(19,"C\xe9dula:"),c.Ub(),c.Jc(20),c.Ub(),c.Vb(21,"div",37),c.Vb(22,"strong"),c.Jc(23,"Usuario:"),c.Ub(),c.Jc(24),c.Ub(),c.Vb(25,"div",38),c.Vb(26,"mat-slide-toggle",34),c.dc("change",function(){c.zc(r);const i=c.hc(2).$implicit;return c.hc(2).actualizarPermisos(i,"GP")}),c.Jc(27," Gestiona productos "),c.Ub(),c.Ub(),c.Vb(28,"div",38),c.Vb(29,"mat-slide-toggle",34),c.dc("change",function(){c.zc(r);const i=c.hc(2).$implicit;return c.hc(2).actualizarPermisos(i,"GB")}),c.Jc(30," Gestiona bodegas "),c.Ub(),c.Ub(),c.Vb(31,"div",38),c.Vb(32,"mat-slide-toggle",34),c.dc("change",function(){c.zc(r);const i=c.hc(2).$implicit;return c.hc(2).actualizarPermisos(i,"GD")}),c.Jc(33," Gestiona departamentos "),c.Ub(),c.Ub(),c.Vb(34,"div",39),c.Vb(35,"mat-slide-toggle",34),c.dc("change",function(){c.zc(r);const i=c.hc(2).$implicit;return c.hc(2).actualizarPermisos(i,"GI")}),c.Jc(36," Gestiona inventarios "),c.Ub(),c.Ub(),c.Vb(37,"div",39),c.Vb(38,"mat-slide-toggle",34),c.dc("change",function(){c.zc(r);const i=c.hc(2).$implicit;return c.hc(2).actualizarPermisos(i,"M")}),c.Jc(39," Da mantenimiento "),c.Ub(),c.Ub(),c.Vb(40,"div",39),c.Vb(41,"mat-slide-toggle",34),c.dc("change",function(){c.zc(r);const i=c.hc(2).$implicit;return c.hc(2).actualizarPermisos(i,"VR")}),c.Jc(42," Ver reportes "),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub()}if(2&r){const r=c.hc(2).$implicit;c.Cb(5),c.Lc(" ",r.nombre,""),c.Cb(2),c.oc("checked",r.habilitado),c.Cb(1),c.Lc(" ",c.jc(9,12,r)," "),c.Cb(2),c.oc("ngClass",c.rc(14,Q,r.habilitado,!r.habilitado)),c.Cb(10),c.Lc(" ",r.cedula," "),c.Cb(4),c.Lc(" ",r.usuario," "),c.Cb(2),c.oc("checked",r.gestionaProductos),c.Cb(3),c.oc("checked",r.gestionaBodegas),c.Cb(3),c.oc("checked",r.gestionaDepartamentos),c.Cb(3),c.oc("checked",r.gestionaInventario),c.Cb(3),c.oc("checked",r.daMantenimiento),c.Cb(3),c.oc("checked",r.daMantenimiento)}}function X(r,i){if(1&r){const r=c.Wb();c.Vb(0,"div"),c.Vb(1,"div",15),c.Vb(2,"div",40),c.Vb(3,"div",41),c.Vb(4,"button",42),c.dc("click",function(){c.zc(r);const i=c.hc(2).$implicit;return c.hc(2).abrirModalCrearEditar(i)}),c.Jc(5," Editar "),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub()}if(2&r){const r=c.hc(2).$implicit;c.Cb(4),c.oc("disabled",!r.habilitado)}}function Y(r,i){if(1&r&&(c.Vb(0,"td"),c.Hc(1,W,43,17,"div",29),c.Hc(2,X,6,1,"div",29),c.Ub()),2&r){const r=i.$implicit;c.Cb(1),c.oc("ngIf","nombre"===r.field),c.Cb(1),c.oc("ngIf","id"===r.field)}}function Z(r,i){if(1&r&&(c.Vb(0,"tr"),c.Hc(1,Y,3,2,"td",26),c.Ub()),2&r){const r=i.columns;c.Cb(1),c.oc("ngForOf",r)}}function rr(r,i){1&r&&(c.Vb(0,"tr"),c.Vb(1,"td",43),c.Jc(2,"No existen usuarios. "),c.Vb(3,"strong"),c.Jc(4,"Click en nuevo"),c.Ub(),c.Jc(5," para crear un usuario"),c.Ub(),c.Ub())}function ir(r,i){if(1&r){const r=c.Wb();c.Vb(0,"div",15),c.Vb(1,"p-toolbar",16),c.Hc(2,F,0,0,"ng-template",17),c.Hc(3,q,1,0,"ng-template",18),c.Ub(),c.Vb(4,"p-table",19),c.dc("onLazyLoad",function(i){return c.zc(r),c.hc().cargarMasDatos(i)}),c.Hc(5,$,2,1,"ng-template",20),c.Hc(6,K,2,1,"ng-template",21),c.Hc(7,Z,2,1,"ng-template",22),c.Hc(8,rr,6,0,"ng-template",23),c.Ub(),c.Ub()}if(2&r){const r=c.hc();c.Cb(4),c.oc("columns",r.columnasPrimeTable)("frozenColumns",r.columnasPrimeTable)("value",r.usuarios)("lazy",!0)("paginator",!0)("rows",r.filas)("totalRecords",r.totalUsuarios)}}const tr=[{path:"gestion",component:(()=>{class r{constructor(r,i,t,a){this._dialog=r,this._usuarioRestService=i,this._cargandoService=t,this._toastrService=a,this.columnasPrimeTable=[{field:"nombre",header:"Nombre",width:"70"},{field:"id",header:"Acciones",width:"30"}],this.filas=o.a.rows,this.usuarios=[],this.totalUsuarios=0}ngOnInit(){this.cargarDatos()}limpiarFiltroGeneral(){}cargarDatos(r,i){this._cargandoService.habilitarCargando();let t={skip:r||0,take:i||N.a.take,busqueda:""};""!==this.textoBusqueda&&this.textoBusqueda&&(t.busqueda=this.textoBusqueda),this._usuarioRestService.buscarUsuarios(t).subscribe(r=>{var i;this.usuarios=r.listaObjetos,this.totalUsuarios=""!==this.textoBusqueda?r.cantidadRegistros:null===(i=this.usuarios)||void 0===i?void 0:i.length,setTimeout(()=>{this._cargandoService.deshabilitarCargando()},1e3)},r=>{this._cargandoService.deshabilitarCargando(),this._toastrService.error("Ocurri\xf3 un error","Error"),console.error(r)})}cargarMasDatos(r){this.cargarDatos(r.first,r.rows)}abrirModalCrearEditar(r){this._dialog.open(S,{data:{usuario:r}}).afterClosed().subscribe(r=>this.cargarDatos())}reiniciarArreglo(){this.usuarios=[],this.totalUsuarios=0}activarDesactivarRegistro(r){if(this.usuarios){this._cargandoService.habilitarCargando();const i=Object(x.a)(this.usuarios,r);this._usuarioRestService.editar({habilitado:!r.habilitado,idUsuario:r.id},r.id).subscribe(t=>{this._toastrService.success("Actualizado correctament","Correcto"),this.usuarios[i].habilitado=!r.habilitado,setTimeout(()=>{this._cargandoService.deshabilitarCargando()},1e3)},r=>{this._toastrService.error("Ocurri\xf3 un error","Error"),setTimeout(()=>{this._cargandoService.deshabilitarCargando()},1e3)})}}actualizarPermisos(r,i){switch(i){case"GB":r.gestionaBodegas=!r.gestionaBodegas;break;case"GD":r.gestionaDepartamentos=!r.gestionaDepartamentos;break;case"GI":r.gestionaInventario=!r.gestionaInventario;break;case"GP":r.gestionaProductos=!r.gestionaInventario;break;case"M":r.daMantenimiento=!r.gestionaInventario;break;case"VR":r.verReportes=!r.verReportes}if(this.usuarios){this._cargandoService.habilitarCargando();const t=Object(x.a)(this.usuarios,r);this._usuarioRestService.editar(r,r.id).subscribe(a=>{switch(this._cargandoService.deshabilitarCargando(),this._toastrService.success("Actualizado correctamente","Correcto"),i){case"GB":this.usuarios[t].gestionaBodegas=r.gestionaBodegas;break;case"GD":this.usuarios[t].gestionaDepartamentos=r.gestionaDepartamentos;break;case"GI":this.usuarios[t].gestionaInventario=r.gestionaInventario;break;case"GP":this.usuarios[t].gestionaProductos=r.gestionaProductos;break;case"M":this.usuarios[t].daMantenimiento=r.daMantenimiento;break;case"VR":this.usuarios[t].verReportes=r.verReportes}},r=>{console.error(r),this._cargandoService.deshabilitarCargando(),this._toastrService.error("Ocurri\xf3 un error","Error")})}}}return r.\u0275fac=function(i){return new(i||r)(c.Pb(s.b),c.Pb(n.a),c.Pb(u.a),c.Pb(b.b))},r.\u0275cmp=c.Jb({type:r,selectors:[["app-ruta-gestion-usuarios"]],decls:27,vars:6,consts:[[1,"row"],[1,"col-sm-12"],[1,"padding20px"],[3,"mostrarIrAtras","titulo","descripcion","iconoUrl"],[1,"row","mat-elevation-z8","padding20px"],[1,"col-md-10"],["color","accent"],["matInput","","placeholder","Ej: 239",3,"ngModel","ngModelChange"],[1,"form-text"],[1,"icon-small"],["mat-raised-button","","color","accent",1,"paddingLeftRigh10",3,"click"],[1,"col-md-2"],[1,"paddingTop26px"],["mat-raised-button","","color","primary",3,"click"],["class","mat-elevation-z8",4,"ngIf"],[1,"mat-elevation-z8"],["styleClass","p-mb-4"],["pTemplate","left"],["pTemplate","right"],["styleClass","p-datatable-responsive-demo",3,"columns","frozenColumns","value","lazy","paginator","rows","totalRecords","onLazyLoad"],["pTemplate","colgroup"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pButton","","pRipple","","label","Nuevo","icon","pi pi-plus",1,"p-button-success","p-mr-2",3,"click"],[3,"class",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"p-d-flex","p-jc-between","p-ai-center"],[1,"text-center"],[4,"ngIf"],[1,"row","paddinBottom2"],[1,"col-sm-10","text-center"],[1,"titulo-card-centro"],[1,"col-sm-2","text-end"],[3,"checked","change"],[3,"ngClass"],[1,"col-sm-12","text-center","paddinBottom2"],[1,"col-sm-6","text-center","paddinBottom2"],[1,"col-sm-4","text-end","paddinBottom2"],[1,"col-sm-4","text-end"],[1,"row","padding20px"],[1,"col-sm-4","text-center"],["mat-raised-button","","color","primary",3,"disabled","click"],["colspan","8"]],template:function(r,i){1&r&&(c.Vb(0,"div",0),c.Vb(1,"div",1),c.Vb(2,"mat-card"),c.Vb(3,"div",2),c.Qb(4,"app-titulo-ruta",3),c.Qb(5,"br"),c.Vb(6,"div",4),c.Vb(7,"div",5),c.Vb(8,"mat-form-field",6),c.Vb(9,"mat-label"),c.Jc(10,"Busque por codigo de nombre o c\xf3digo*"),c.Ub(),c.Vb(11,"input",7),c.dc("ngModelChange",function(r){return i.textoBusqueda=r}),c.Ub(),c.Ub(),c.Vb(12,"p",8),c.Vb(13,"mat-icon",9),c.Jc(14,"info"),c.Ub(),c.Jc(15," Puede buscar los departamentos por c\xf3digo o nombre. "),c.Ub(),c.Vb(16,"button",10),c.dc("click",function(){return i.reiniciarArreglo()})("click",function(){return i.cargarDatos()}),c.Jc(17," Buscar "),c.Vb(18,"mat-icon"),c.Jc(19,"search"),c.Ub(),c.Ub(),c.Ub(),c.Vb(20,"div",11),c.Vb(21,"div",12),c.Vb(22,"button",13),c.dc("click",function(){return i.textoBusqueda=""}),c.Vb(23,"mat-icon",9),c.Jc(24,"cleaning_services"),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Qb(25,"br"),c.Hc(26,ir,9,7,"div",14),c.Ub(),c.Ub(),c.Ub()),2&r&&(c.Cb(4),c.oc("mostrarIrAtras",!0)("titulo","Gesti\xf3n de usuarios")("descripcion","Gestione todos sus usuarios y permisos")("iconoUrl","usuario.svg"),c.Cb(7),c.oc("ngModel",i.textoBusqueda),c.Cb(15),c.oc("ngIf",i.usuarios))},directives:[z.a,O.a,h.c,h.g,g.a,l.b,l.l,l.o,f.a,p.a,a.l,H.a,M.f,G.a,B.b,R.a,a.k,A.a,z.b,a.j],pipes:[L.a],styles:[""]}),r})()},{path:"",redirectTo:"gestion"}];let ar=(()=>{class r{}return r.\u0275mod=c.Nb({type:r}),r.\u0275inj=c.Mb({factory:function(i){return new(i||r)},imports:[[e.e.forChild(tr)],e.e]}),r})();var er=t("sspE"),or=t("vbRb");t("kg3b"),t("LYaL"),t("qeg7");let sr=(()=>{class r{}return r.\u0275mod=c.Nb({type:r}),r.\u0275inj=c.Mb({factory:function(i){return new(i||r)},imports:[[a.c,ar,er.a,l.q,...or.a]]}),r})()},nRUH:function(r,i,t){"use strict";t.d(i,"a",function(){return n});var a=t("fXoL"),e=t("ofXK"),o=t("bTqV"),s=t("NFeN");function c(r,i){if(1&r){const r=a.Wb();a.Vb(0,"div",4),a.Vb(1,"button",5),a.dc("click",function(){return a.zc(r),a.hc().irAtras()}),a.Vb(2,"mat-icon"),a.Jc(3,"keyboard_backspace"),a.Ub(),a.Ub(),a.Ub()}}let n=(()=>{class r{constructor(){this.titulo="",this.descripcion="",this.iconoUrl="",this.mostrarIrAtras=!0}ngOnInit(){}irAtras(){window.history.back()}}return r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=a.Jb({type:r,selectors:[["app-titulo-ruta"]],inputs:{titulo:"titulo",descripcion:"descripcion",iconoUrl:"iconoUrl",mostrarIrAtras:"mostrarIrAtras"},decls:10,vars:6,consts:[[1,"row"],["class","col-md-1",4,"ngIf"],[1,"col-md-2"],["alt","",1,"icono-titulo","rounded","mx-auto","d-block",3,"src"],[1,"col-md-1"],["mat-raised-button","","color","accent",1,"espacio-boton-atras",3,"click"]],template:function(r,i){1&r&&(a.Vb(0,"div",0),a.Hc(1,c,4,0,"div",1),a.Vb(2,"div"),a.Vb(3,"h1"),a.Jc(4),a.Ub(),a.Vb(5,"p"),a.Jc(6),a.Ub(),a.Ub(),a.Vb(7,"div",2),a.Qb(8,"img",3),a.Ub(),a.Ub(),a.Qb(9,"br")),2&r&&(a.Cb(1),a.oc("ngIf",i.mostrarIrAtras),a.Cb(1),a.Eb("col-md-"+(i.mostrarIrAtras?"9":"10")),a.Cb(2),a.Kc(i.titulo),a.Cb(2),a.Kc(i.descripcion),a.Cb(2),a.oc("src","/assets/img/iconos/"+i.iconoUrl,a.Bc))},directives:[e.l,o.a,s.a],styles:[".espacio-boton-atras[_ngcontent-%COMP%]{margin-bottom:20px}"]}),r})()}}]);